---
import { getCollection } from 'astro:content';
import { format } from 'date-fns';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) =>
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<div class="space-y-8">
  {sortedPosts.map((post) => (
    <article class="border-b border-gray-200 pb-8 last:border-0">
      <a href={`/an/posts/${post.data.slug}`} class="group">
        <h2 class="text-2xl font-bold text-gray-900 group-hover:text-blue-600">
          {post.data.title}
        </h2>
        <time class="mt-2 block text-sm text-gray-500">
          {format(new Date(post.data.date), 'MMMM d, yyyy')}
        </time>
        <p class="mt-3 text-gray-600">
          {post.data.excerpt}
        </p>
      </a>
    </article>
  ))}
</div>
