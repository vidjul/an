<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><meta name="description" content="Vidushan Chooriyakumaran's personal website."><meta name="generator" content="Astro v5.16.6"><link rel="icon" type="image/svg+xml" href="/an/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/an/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/an/favicon-32x32.png"><link rel="apple-touch-icon" sizes="180x180" href="/an/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="192x192" href="/an/android-chrome-192x192.png"><link rel="icon" type="image/png" sizes="512x512" href="/an/android-chrome-512x512.png"><title>Optimize pass for WSL, Ubuntu and Android</title><link rel="stylesheet" href="/an/_astro/about.CGzCtUvL.css"></head> <body class="bg-zinc-50"> <div class="mx-auto flex min-h-screen max-w-6xl flex-col bg-white shadow-xs"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1aJNLi" prefix="r1" component-url="/an/_astro/Header.CXe5SuN6.js" component-export="default" renderer-url="/an/_astro/client.9unXo8s5.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;Header&quot;,&quot;value&quot;:true}" await-children><header class="font-display sticky top-0 z-10 bg-white px-4 py-8 text-xl shadow-xs md:px-16"><span>vidu.sh</span><span><span class="font-normal text-gray-300">/</span><a href="/an/" class="text-blue-300 hover:underline">an</a></span></header><!--astro:end--></astro-island> <main class="mt-8 flex-1 px-4 md:px-32">  <article class="prose mx-auto lg:prose-lg prose-headings:font-display prose-h1:text-center"> <h1>Optimize pass for WSL, Ubuntu and Android</h1> <time class="flex justify-center" datetime="2020-01-05T00:00:00.000Z"> January 5, 2020 </time> <h2 id="introduction">Introduction</h2>
<p>To manage my passwords, I use <a href="https://www.passwordstore.org/">pass</a>. An extension called <a href="https://github.com/browserpass/browserpass-native">browserpass</a> allows filling the passwords by retrieving them from the store operated by pass. There is a Windows-compatible version, but as I am using WSL, I didn’t want to have two copies of my password store (it would have been annoying to sync the two stores each time). Below are the steps that I’ve followed to make this works!</p>
<h2 id="wsl-part">WSL part</h2>
<p>First, you have to install browserpass-native, the host that will communicate with the browser to exchange the pass. You can download the latest release from <a href="https://github.com/browserpass/browserpass-native">here</a>. I’ve extracted the file to <code>~/browserpass/</code>.</p>
<p>A passphrase protects my password store. To allow Windows to load the gpg-agent with the passphrase so it can access your password store, you have to configure a pinentry program. The following script called <a href="https://github.com/diablodale/pinentry-wsl-ps1">pinentry-wsl-ps1</a> perfectly does the trick!</p>
<ul>
<li>Copy <code>pinentry-wsl-ps1.sh</code> somewhere.</li>
<li>Give this read + execute rights (<code>chmod ug=rx pinentry-wsl-ps1.sh</code>)</li>
<li>Create or edit <code>~/.gnupg/gpg-agent.conf</code> to add the following line:</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>pinentry-program /path/to/your/pinentry-wsl-ps1.sh</span></span>
<span class="line"><span></span></span></code></pre>
<h2 id="windows-part">Windows part</h2>
<p>Download browserpass-native for Windows from <a href="https://github.com/browserpass/browserpass-native">here</a>. Run the .msi, and it will copy the appropriate files to <code>C:/Program Files/Browserpass</code> (It looks like nothing happened, check if the folder is created after the installation process).</p>
<ul>
<li>Create <code>browserpass-wsl.bat</code> to <code>C:/Program Files/Browserpass</code> with the following content:</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>@echo off</span></span>
<span class="line"><span>bash -c 'cd /your/home; ~/browserpass/browserpass-linux64'</span></span>
<span class="line"><span></span></span></code></pre>
<ul>
<li>Update the <code>*-host.json</code>, which corresponds to your Browser (For Chrome/Brave, I’ve updated <code>chromimum-host.json</code>) and modify the path:</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>{</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  "path": "C:\\Program Files\\Browserpass\\browserpass-wsl.bat"</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre>
<ul>
<li>Install browserpass extension for your browser and enjoy!</li>
</ul> </article>  </main> <footer class="border-sky-600/400 mx-4 mt-8 border-t p-4 text-center text-slate-400 md:mx-16">
Thanks for passing by!
</footer> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="1zncaG" component-url="/an/_astro/react.DbUm2fbU.js" component-export="Analytics" renderer-url="/an/_astro/client.9unXo8s5.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Analytics&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> <astro-island uid="ZgRQNY" component-url="/an/_astro/react.Di5TAqsv.js" component-export="SpeedInsights" renderer-url="/an/_astro/client.9unXo8s5.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;SpeedInsights&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> </div> </body></html>